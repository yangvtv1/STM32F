/*
 *              Copyright (c)  2023
 *  File header: 		AT_command.c
 *  Created on : 		August 14, 2023
 *      Author : 		Luong_Thanh_Hai (Embedded Software Engineer)
 *      Contact:        elvis.luong@gmail.com
 */


#include "AT_command.h"

/******************************************************************************/
/******************************************************************************/
/***                           Private definitions                           **/
/******************************************************************************/
/******************************************************************************/
#define REFESH_TIME							4000
/******************************************************************************/
/******************************************************************************/
/***                      Private functions declare                          **/
/******************************************************************************/
/******************************************************************************/

/******************************************************************************/
/******************************************************************************/
/***                                Global Parameters                        **/
/******************************************************************************/
/******************************************************************************/
at_command_t  MODULE;
/******************************************************************************/
/******************************************************************************/
/***                            Private functions                            **/
/******************************************************************************/
/******************************************************************************/

/******************************************************************************/
/******************************************************************************/
/***                      Processing functions Callback                      **/
/******************************************************************************/
/******************************************************************************/
void module_TIMERCallback(void * arg)
{
	static uint32_t check_counter = 0;
	if(check_counter != 0)
	{
		LOGA(INF_FILE, "module timer: %ld\r\n", DRV_GETTICK() - check_counter);
		check_counter = DRV_GETTICK();
	}
	else
	{
		check_counter = DRV_GETTICK();
	}
}
/******************************************************************************/
/******************************************************************************/
/***                            MainRun functions                            **/
/******************************************************************************/
/******************************************************************************/

/******************************************************************************/
/******************************************************************************/
/***                            Public functions                             **/
/******************************************************************************/
/******************************************************************************/
void module_init(void)
{
	memset(&MODULE, 0x00, sizeof(MODULE));

	MODULE.Init = &module_init;


	MODULE.work.timer_refesh = REFESH_TIME;
	Cblk_parameter_t module_Tmrcbk;
	_Clear_DrvPar(&module_Tmrcbk);
	module_Tmrcbk.type = DR_TIMER;
	module_Tmrcbk.para =  &MODULE.work.timer_refesh;
	module_Tmrcbk.EventCallback_t = &module_TIMERCallback;
	Drv_RegisterIRQ_callback(module_Tmrcbk);


}
/******************************************************************************/
/******************************************************************************/
/***                            Library callback                             **/
/******************************************************************************/
/******************************************************************************/





