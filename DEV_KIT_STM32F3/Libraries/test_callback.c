/*
 *              Copyright (c)  2023
 *  File header: 		test_callback.c
 *  Created on : 		August 14, 2023
 *      Author : 		Luong_Thanh_Hai (Embedded Software Engineer)
 *      Contact:        elvis.luong@gmail.com
 */


#include "test_callback.h"

/******************************************************************************/
/******************************************************************************/
/***                           Private definitions                           **/
/******************************************************************************/
/******************************************************************************/

/******************************************************************************/
/******************************************************************************/
/***                      Private functions declare                          **/
/******************************************************************************/
/******************************************************************************/

/******************************************************************************/
/******************************************************************************/
/***                                Global Parameters                        **/
/******************************************************************************/
/******************************************************************************/
test_callback_t TEST_CBK;
/******************************************************************************/
/******************************************************************************/
/***                            Private functions                            **/
/******************************************************************************/
/******************************************************************************/

/******************************************************************************/
/******************************************************************************/
/***                      Processing functions Callback                      **/
/******************************************************************************/
/******************************************************************************/
void test_cbk(void * arg)                 // callback to period timer
{
	static uint32_t check_counter = 0;
	if(check_counter != 0)
	{
		LOGA(INF, "Call timer: %d\r\n", DRV_GETTICK() - check_counter);
		check_counter = DRV_GETTICK();
	}
	else
	{
		check_counter = DRV_GETTICK();
	}
}

void test_uart_cbk(void * arg)         // callback to usart interrupt
{

}
/******************************************************************************/
/******************************************************************************/
/***                            MainRun functions                            **/
/******************************************************************************/
/******************************************************************************/
void run_test_callback(void)
{

}
/******************************************************************************/
/******************************************************************************/
/***                            Public functions                             **/
/******************************************************************************/
/******************************************************************************/
void init_test_callback(void)
{
	memset(&TEST_CBK, 0x00, sizeof(TEST_CBK));

	Cblk_parameter_t test_callback;

	uint32_t timeout;
	timeout = 6000;

	_Clear_DrvPar(&test_callback);
	test_callback.type = DR_TIMER;
	test_callback.para = &timeout;
	test_callback.EventCallback_t = &test_cbk;
	Drv_RegisterIRQ_callback(test_callback);

	Cblk_parameter_t test_uart;
	uint32_t rcu_usart;
	rcu_usart = RCU_USART1;

	_Clear_DrvPar(&test_uart);
	test_uart.type = DR_UART;
	test_uart.para = &rcu_usart;
	test_uart.EventCallback_t = test_uart_cbk;
	Drv_RegisterIRQ_callback(test_callback);

//	TEST_CBK.init = &init_test_callback;
}
/******************************************************************************/
/******************************************************************************/
/***                            Library callback                             **/
/******************************************************************************/
/******************************************************************************/





